generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Sets {
  id           String          @id @default(uuid()) @db.Char(36)
  setNumber    String          @unique @db.VarChar(255)
  name         String          @db.VarChar(255)
  partsAmount  Int             @db.Int
  themeName    String          @db.Text
  yearReleased Int             @db.SmallInt
  addedBy      Users           @relation(fields: [addedById], references: [id])
  addedById    String          @db.Char(36)
  attachments  SetAttachment[]
  instructions Instructions[]
  usedBy       Users[]         @relation("usedBy")
}

model SetAttachment {
  id           String         @id @default(uuid()) @db.Char(36)
  addedOn      DateTime       @default(now())
  lastModified DateTime       @updatedAt
  description  String?        @db.VarChar(255)
  yearBought   Int?           @db.SmallInt
  price        Int?
  currency     Int?           @db.Int
  image        String?        @db.VarChar(255)
  instructions Instructions[]
  addedById    String         @db.Char(36)
  addedBy      Users          @relation(fields: [addedById], references: [id])
  set          Sets           @relation(fields: [setId], references: [id])
  setId        String         @db.Char(36)
}

model Instructions {
  id           String        @id @default(uuid()) @db.Char(36)
  instructions String        @db.VarChar(255)
  addedById    String        @db.Char(36)
  addedBy      Users         @relation(fields: [addedById], references: [id])
  attachment   SetAttachment @relation(fields: [attachmentId], references: [id])
  attachmentId String        @db.Char(36)
  set          Sets          @relation(fields: [setId], references: [id])
  setId        String        @db.Char(36)
}

model Users {
  id                String          @id @default(uuid()) @db.Char(36)
  username          String         @db.VarChar(255) @unique
  // email             String?          @unique @db.VarChar(255)
  password          String          @db.VarChar(255)
  preferredCurrency Int             @db.Int
  preferredLanguage Int             @db.Int
  sessions          Sessions[]
  usedSets          Sets[]          @relation("usedBy")
  setAttachments    SetAttachment[]
  Instructions      Instructions[]
  ownedSets         Sets[]
}

model Sessions {
  id     String @id @default(uuid()) @db.Char(36)
  token  String @db.VarChar(255)
  userId String @db.Char(36)
  user   Users  @relation(fields: [userId], references: [id])
}
